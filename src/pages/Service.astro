---
import Layout from "../components/Layout.astro";
---

<Layout>
  <div 
    class="relative bg-transparent w-full px-6 py-16 max-w-6xl mx-auto flex flex-col gap-8" 
    id="dynamic-content"
  >
  </div>

  <script is:inline>
    
    window.addEventListener("DOMContentLoaded", () => {
      const container = document.getElementById("dynamic-content");
      const metadataRaw = localStorage.getItem("metaData");

      if (!metadataRaw) return;

      try {
        const metadata = JSON.parse(metadataRaw);
        const heading = metadata.heading || "Our Service";
        const description = metadata.description || "We provide exceptional services.";
        const features = Array.isArray(metadata.features) ? metadata.features : [];

        container.innerHTML = `
          <div>
            <h1 class="text-4xl md:text-5xl font-bold mb-4">${heading}</h1>
            <p class="text-base md:text-lg text-gray-500 leading-relaxed mb-2">${description}</p>
          </div>
          ${
           features && features.length > 0 
              ? `<div class="flex flex-wrap gap-3 mt-4">
                  ${features.map(f => `
                    <span class="px-4 py-2 bullet-dark text-sm rounded-full border border-gray-200 bg-gray-100 text-gray-800 shadow-sm">${f}</span>
                  `).join("")}
                </div>`
              : ""
          }
          <a
            href="/"
            class="absolute anchor bottom-6 right-6 bg-[#FF7D12] text-white px-5 py-2 rounded-md text-sm font-medium shadow-md transition"
          >
            ‚Üê Back
          </a>
        `;
      } catch (e) {
        container.innerHTML = `
          <div>
            <h1 class="text-4xl md:text-5xl font-bold mb-4">Error</h1>
            <p class="text-base md:text-lg text-gray-500 leading-relaxed mb-2">Failed to load service data.</p>
          </div>
        `;
      }
    });
  </script>
</Layout>
